#!/bin/bash

# List of block numbers to reimport
blocks=(11448619 11449145 11449656 11450186 11450718 11451267 11451817 11452355 11452901 11453460 11454019 11454566 11455121 11455663 11456213 11456759 11457317 11457874 11458412 11458958 11459513 11460058 11460612 11461164 11461715 11462254 11462794 11463350 11463869 11464381 11464905 11465441 11465959 11466496 11467010 11467521 11468046 11468577 11469107 11469623 11470157 11470686 11471215 11471743 11472278 11472805 11473333 11473862 11474394 11474930 11475473 11476023 11476578 11477106 11477653 11478200 11478737 11479285 11479823 11480363 11480897 11481444 11481985 11482538 11483086 11483626 11484163 11484715 11485269 11485805 11486350 11486889 11487439 11487981 11488520 11489049 11489585 11490128 11490673 11491205 11491728 11492262 11492803 11493334 11493877 11494414 11494942 11495476 11496016 11496568 11497104 11497657 11498207 11498746 11499278 11499811 11500345 11500882 11501414 11501958)

total=${#blocks[@]}
count=0

echo "Starting batch reimport of $total blocks..."
echo ""

for block in "${blocks[@]}"; do
  ((count++))
  percent=$((count * 100 / total))
  echo "[$count/$total - $percent%] Reimporting block $block..."

  npm run reimport $block 2>&1 | grep -E "✅|❌|Created/updated session|Created new era" | head -n 5

  if [ $? -eq 0 ]; then
    echo "  ✓ Success"
  else
    echo "  ✗ Failed"
  fi
  echo ""
done

echo "Batch reimport completed! Processed $total blocks."
